#{extends '/layouts/home.html' /}
#{set title:'Teacher Assistant' /}

<div id="searchDiv"  class="navbar-inner" >
<br/>
<br/>
</div>
<div  id="studentsDiv" >
<table id="students_list"></table>
<div id="students_list_pagination"></div>
</div>

<script type="text/template" id="search_template">
<br/>
<form class="navbar-form pull-left">
  &nbsp;&nbsp;Class:&nbsp;
  <select name="class" class=" classDropdown span2">
	<%_.each(opts.classes, function(val,key){ %>
	<option value="<%=key%>"><%=val%></option>
	<%});%>
	</select>
	 &nbsp;&nbsp;Subjects:&nbsp;
  	<%_.each(opts.classSubjMap, function(val,key){ %>
	<select name="subj" class=" <%=key%>_subj subjDropDown span2">
		<%_.each(val, function(subj,id){ %>
		<option value="<%=id%>"><%=subj%></option>		
		<%});%>
	</select>
	<%});%>	
</form>
<br/><br/><br/>
</script>


<script src="@{'/public/javascripts/underscore-min.js'}" type="text/javascript" charset="${_response_encoding}"></script>
<script src="@{'/public/javascripts/backbone-min.js'}"	 type="text/javascript" charset="${_response_encoding}"></script>   
<script src="@{'/public/javascripts/reportcard.js'}" type="text/javascript" charset="${_response_encoding}"></script>


<script type="text/javascript">
$("document").ready(function(){
	var rep = new Report({
		"dropDownOpts":${headerAndDropDownOpts.raw()},
		"selectedClass":${selectedClass.raw()},
		"selectedSubj":${selectedSubj.raw()},
		"students":${students.raw()},
		"studentMarks":${studentMarks.raw()}
	});
	
	rep.init();

});

</script>